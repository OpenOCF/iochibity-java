\hypertarget{ocf___co_service_provider_8c}{}\section{src/c/ocf\+\_\+\+Co\+Service\+Provider.c File Reference}
\label{ocf___co_service_provider_8c}\index{src/c/ocf\+\_\+\+Co\+Service\+Provider.\+c@{src/c/ocf\+\_\+\+Co\+Service\+Provider.\+c}}


J\+NI implementation of Co\+Service\+Provider (client) Java A\+PI\+: {\ttfamily exhibit\+\_\+stimulus} and {\ttfamily observe\+\_\+behavior}  


{\ttfamily \#include $<$ctype.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdlib.\+h$>$}\newline
{\ttfamily \#include \char`\"{}org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}jni\+\_\+utils.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ocf\+\_\+\+Init.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ocf\+\_\+exceptions.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}octypes.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}oic\+\_\+malloc.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ocpayload.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ocresource.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ocresourcehandler.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}ocstack.\+h\char`\"{}}\newline
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
jobject \hyperlink{ocf___co_service_provider_8c_af0e283eaf5d70bd64430a5c3f992526e}{O\+C\+Client\+Response\+\_\+to\+\_\+\+Observation\+In} (J\+N\+I\+Env $\ast$env, O\+C\+Client\+Response $\ast$c\+\_\+\+O\+C\+Client\+Response)
\begin{DoxyCompactList}\small\item\em Convert O\+C\+Client\+Response to an {\ttfamily Observation\+In} object. \end{DoxyCompactList}\item 
O\+C\+Stack\+Application\+Result \hyperlink{ocf___co_service_provider_8c_ab3aab0f763b43b07cee3f3a303117995}{observe\+\_\+behavior} (void $\ast$c\+\_\+\+Co\+SP, O\+C\+Do\+Handle c\+\_\+\+Transaction\+Handle, O\+C\+Client\+Response $\ast$c\+\_\+\+O\+C\+Client\+Response)
\begin{DoxyCompactList}\small\item\em Wrapper for {\ttfamily O\+C\+Client\+Response\+Handler}; called by stack on receipt of incoming {\ttfamily O\+C\+Client\+Response} from server. \end{DoxyCompactList}\item 
J\+N\+I\+E\+X\+P\+O\+RT void J\+N\+I\+C\+A\+LL \hyperlink{ocf___co_service_provider_8c_ac1feb9ab9d78fc7ad97a65216310d44f}{Java\+\_\+org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider\+\_\+exhibit\+Stimulus} (J\+N\+I\+Env $\ast$env, jobject this\+\_\+\+Co\+SP)
\begin{DoxyCompactList}\small\item\em Wrapper for {\ttfamily O\+C\+Do\+Resource}; called by called by the user to send a request to a server. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
jobject \hyperlink{ocf___co_service_provider_8c_a5d9b29efc98bd43e45b3cf5c14bfa98c}{g\+\_\+\+Co\+SP} = N\+U\+LL
\end{DoxyCompactItemize}


\subsection{Detailed Description}
J\+NI implementation of Co\+Service\+Provider (client) Java A\+PI\+: {\ttfamily exhibit\+\_\+stimulus} and {\ttfamily observe\+\_\+behavior} 

\begin{DoxyAuthor}{Author}
Gregg Reynolds 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
December 2016 
\end{DoxyDate}


\subsection{Function Documentation}
\hypertarget{ocf___co_service_provider_8c_ac1feb9ab9d78fc7ad97a65216310d44f}{}\label{ocf___co_service_provider_8c_ac1feb9ab9d78fc7ad97a65216310d44f} 
\index{ocf\+\_\+\+Co\+Service\+Provider.\+c@{ocf\+\_\+\+Co\+Service\+Provider.\+c}!Java\+\_\+org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider\+\_\+exhibit\+Stimulus@{Java\+\_\+org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider\+\_\+exhibit\+Stimulus}}
\index{Java\+\_\+org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider\+\_\+exhibit\+Stimulus@{Java\+\_\+org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider\+\_\+exhibit\+Stimulus}!ocf\+\_\+\+Co\+Service\+Provider.\+c@{ocf\+\_\+\+Co\+Service\+Provider.\+c}}
\subsubsection{\texorpdfstring{Java\+\_\+org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider\+\_\+exhibit\+Stimulus()}{Java\_org\_iochibity\_CoServiceProvider\_exhibitStimulus()}}
{\footnotesize\ttfamily J\+N\+I\+E\+X\+P\+O\+RT void J\+N\+I\+C\+A\+LL Java\+\_\+org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider\+\_\+exhibit\+Stimulus (\begin{DoxyParamCaption}\item[{J\+N\+I\+Env $\ast$}]{env,  }\item[{jobject}]{this\+\_\+\+Co\+SP }\end{DoxyParamCaption})}



Wrapper for {\ttfamily O\+C\+Do\+Resource}; called by called by the user to send a request to a server. 

It wraps {\ttfamily O\+C\+Do\+Resource}. The parameters to {\ttfamily O\+C\+Do\+Resource} are extracted from {\itshape this\+\_\+\+Co\+SP}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em env} & J\+N\+I\+Env pointer \\
\hline
\mbox{\tt in}  & {\em this\+\_\+\+Co\+SP} & {\itshape this} handle, reference to a {\ttfamily Co\+Service\+Provider} instance \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void
\end{DoxyReturn}

\begin{DoxyExceptions}{Exceptions}
{\em org.\+iochibity.\+exceptions.\+J\+N\+I\+Runtime\+Exception} & Indicates a bad result from a J\+NI A\+PI routine (e.\+g. {\ttfamily Get\+Int\+Field})\\
\hline
\end{DoxyExceptions}
\begin{DoxySeeAlso}{See also}
\hyperlink{ocf___service_provider_8c_ab86f7480d9586214cee656c860f65a94}{observe\+\_\+stimulus} 

\hyperlink{ocf___service_provider_8c_a4596493fca77594f516776768fde6d92}{Java\+\_\+org\+\_\+iochibity\+\_\+\+Service\+Provider\+\_\+exhibit\+Behavior} 

\hyperlink{ocf___co_service_provider_8c_ab3aab0f763b43b07cee3f3a303117995}{observe\+\_\+behavior} 
\end{DoxySeeAlso}
\hypertarget{ocf___co_service_provider_8c_ab3aab0f763b43b07cee3f3a303117995}{}\label{ocf___co_service_provider_8c_ab3aab0f763b43b07cee3f3a303117995} 
\index{ocf\+\_\+\+Co\+Service\+Provider.\+c@{ocf\+\_\+\+Co\+Service\+Provider.\+c}!observe\+\_\+behavior@{observe\+\_\+behavior}}
\index{observe\+\_\+behavior@{observe\+\_\+behavior}!ocf\+\_\+\+Co\+Service\+Provider.\+c@{ocf\+\_\+\+Co\+Service\+Provider.\+c}}
\subsubsection{\texorpdfstring{observe\+\_\+behavior()}{observe\_behavior()}}
{\footnotesize\ttfamily O\+C\+Stack\+Application\+Result observe\+\_\+behavior (\begin{DoxyParamCaption}\item[{void $\ast$}]{c\+\_\+\+Co\+SP,  }\item[{O\+C\+Do\+Handle}]{c\+\_\+\+Transaction\+Handle,  }\item[{O\+C\+Client\+Response $\ast$}]{c\+\_\+\+O\+C\+Client\+Response }\end{DoxyParamCaption})}



Wrapper for {\ttfamily O\+C\+Client\+Response\+Handler}; called by stack on receipt of incoming {\ttfamily O\+C\+Client\+Response} from server. 

Convert the incoming response data to an {\ttfamily Observation\+In} object, and then pass that to the {\ttfamily observe\+Behavior} method of the transaction\textquotesingle{}s {\ttfamily Co\+Service\+Provider} object. That object is conveyed by the c\+\_\+\+Co\+SP parameter (in the C A\+PI, void$\ast$ context), which was passed (as the \char`\"{}context\char`\"{} pointer of the O\+C\+Callback\+Data param of O\+C\+Do\+Resource) by the {\itshape exhibit\+Stimulus} routine of the Co\+Service\+Provider.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em c\+\_\+\+Co\+SP} & handle to {\ttfamily Co\+Service\+Provider} (client) object containing callback method; {\ttfamily context} in C A\+PI\\
\hline
\mbox{\tt in}  & {\em c\+\_\+\+Transaction\+Handle} & token identifying originating {\ttfamily O\+C\+Do\+Resource} invocation (not the same as the Co\+AP token)\\
\hline
\mbox{\tt in}  & {\em c\+\_\+\+O\+C\+Client\+Response} & response data from server\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
result code of type {\ttfamily O\+C\+Stack\+Application\+Result}
\end{DoxyReturn}
\begin{DoxySeeAlso}{See also}
\hyperlink{ocf___co_service_provider_8c_ac1feb9ab9d78fc7ad97a65216310d44f}{Java\+\_\+org\+\_\+iochibity\+\_\+\+Co\+Service\+Provider\+\_\+exhibit\+Stimulus} 

\hyperlink{ocf___service_provider_8c_ab86f7480d9586214cee656c860f65a94}{observe\+\_\+stimulus} 

\hyperlink{ocf___service_provider_8c_a4596493fca77594f516776768fde6d92}{Java\+\_\+org\+\_\+iochibity\+\_\+\+Service\+Provider\+\_\+exhibit\+Behavior} 
\end{DoxySeeAlso}
\hypertarget{ocf___co_service_provider_8c_af0e283eaf5d70bd64430a5c3f992526e}{}\label{ocf___co_service_provider_8c_af0e283eaf5d70bd64430a5c3f992526e} 
\index{ocf\+\_\+\+Co\+Service\+Provider.\+c@{ocf\+\_\+\+Co\+Service\+Provider.\+c}!O\+C\+Client\+Response\+\_\+to\+\_\+\+Observation\+In@{O\+C\+Client\+Response\+\_\+to\+\_\+\+Observation\+In}}
\index{O\+C\+Client\+Response\+\_\+to\+\_\+\+Observation\+In@{O\+C\+Client\+Response\+\_\+to\+\_\+\+Observation\+In}!ocf\+\_\+\+Co\+Service\+Provider.\+c@{ocf\+\_\+\+Co\+Service\+Provider.\+c}}
\subsubsection{\texorpdfstring{O\+C\+Client\+Response\+\_\+to\+\_\+\+Observation\+In()}{OCClientResponse\_to\_ObservationIn()}}
{\footnotesize\ttfamily jobject O\+C\+Client\+Response\+\_\+to\+\_\+\+Observation\+In (\begin{DoxyParamCaption}\item[{J\+N\+I\+Env $\ast$}]{env,  }\item[{O\+C\+Client\+Response $\ast$}]{c\+\_\+\+O\+C\+Client\+Response }\end{DoxyParamCaption})}



Convert O\+C\+Client\+Response to an {\ttfamily Observation\+In} object. 

Allocate an {\ttfamily Observation\+In} java object, then use data from incoming {\ttfamily O\+C\+Client\+Response} to initialize it. Return the initialize object. Called internally by {\ttfamily observe\+\_\+behavior}.


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em env} & J\+N\+I\+Env pointer \\
\hline
\mbox{\tt in}  & {\em c\+\_\+\+O\+C\+Client\+Response} & response data from server \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
newly allocated and initialized {\ttfamily Observation\+In} object 
\end{DoxyReturn}


\subsection{Variable Documentation}
\hypertarget{ocf___co_service_provider_8c_a5d9b29efc98bd43e45b3cf5c14bfa98c}{}\label{ocf___co_service_provider_8c_a5d9b29efc98bd43e45b3cf5c14bfa98c} 
\index{ocf\+\_\+\+Co\+Service\+Provider.\+c@{ocf\+\_\+\+Co\+Service\+Provider.\+c}!g\+\_\+\+Co\+SP@{g\+\_\+\+Co\+SP}}
\index{g\+\_\+\+Co\+SP@{g\+\_\+\+Co\+SP}!ocf\+\_\+\+Co\+Service\+Provider.\+c@{ocf\+\_\+\+Co\+Service\+Provider.\+c}}
\subsubsection{\texorpdfstring{g\+\_\+\+Co\+SP}{g\_CoSP}}
{\footnotesize\ttfamily jobject g\+\_\+\+Co\+SP = N\+U\+LL}

